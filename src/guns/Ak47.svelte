<script>
    import { tweened } from "svelte/motion";
    import { cubicIn } from "svelte/easing";
    import { fire } from "../actions.js";

    const roundsPerMinute = 600 * 2;

    const x = tweened(0, {
        duration: 60000 / roundsPerMinute,
        easing: cubicIn,
    });

    let interval;
    $: if ($fire) {
        interval = setInterval(() => {
            x.update(value => value === 0 ? -10 : 0)
        }, 60000 / roundsPerMinute);
    } else {
        interval && clearInterval(interval);
    }
</script>

<style>
    svg {
        transform: scaleX(-1) translate(78px, 87px);
    }
</style>

<svg viewBox="-10 -10 410.4827 130.69776" width="140" height="140" >
    <path style="transform: translateX({$x}px)"
        d="m 396.647,19.26 c -0.625,-1.25 -0.5,-11.625 -0.5,-11.625 l -0.125,-5.25 -5.125,0.125 -4.75,10.125 -4.75,7.25 c 0,0 -18.748,0.41 -26.75,0.25 -12.5,-0.25 -19.625,-7.125 -19.625,-7.125 l -0.375,-4.75 -40.75,-0.25 c 0,0 0.25,-1.75 -0.75,-2 -1,-0.25 -49.5,-0.125 -49.5,-0.125 l -0.75,-1.625 c 0,0 -8.125,0 -10.125,0.125 -2,0.125 -4.375,2.75 -6,3 -1.625,0.25 -5.625,0.125 -5.625,0.125 L 221.022,0.635 214.897,0.51 c 0,0 -0.25,2.5 0,5.75 -10.75,0 -90.004,0.16 -93.875,0.375 -2.25,0.125 -4.592,1.48 -5.651,2.594 -1.178,1.238 -1.907,3.229 -1.974,4.281 -3.375,0.25 -4.125,0.875 -6,2.75 -1.875,1.875 -1.5,6.25 -1.5,6.25 0,0 -28.739,3.908 -31.25,4 -8.241,0.299 -5.625,-3.5 -15.125,-2.5 -5.07,0.533 -54.5,6.25 -55.75,6.25 -1.25,0 -4.219,0.566 -3.125,3.75 4.406,12.826 5.542,29.451 5.125,34.5 -0.539,6.527 20.125,-3 46.125,-10.75 26,-7.75 54.75,-18.5 54.75,-18.5 0,0 2.912,1.623 4.375,5.125 1.494,3.578 1.125,7.875 1.125,7.875 0,0 -9.5,22.25 -12,26 -2.5,3.75 1.5,4 1.5,4 l 17,4.625 c 1.75,0.418 2.791,-0.125 3.291,-1.916 0.766,-2.744 1.168,-13.584 3.168,-16.584 2,-3 10.875,-13.375 10.875,-13.375 h 37.916 l -0.041,-15.584 c 0,0 0.125,0.584 2.457,0.25 0,40.148 33.912,74.346 44.751,79.959 2.884,1.494 3.75,-0.25 4.5,-1.625 0.75,-1.375 9.416,-15.332 10.75,-18 1.333,-2.666 2.666,-3.666 -1.334,-6.332 C 204.285,73.213 205.147,38.51 205.147,38.51 c 0,0 14.25,-0.25 15.875,-0.125 1.625,0.125 6.991,4.867 9.875,4.875 11.603,0.037 13.625,-5.625 22.375,-5.75 4.003,-0.057 46.375,0 46.375,0 v -7.375 l 100.125,0.125 0.125,-9.875 c 0,0 -2.625,0.125 -3.25,-1.125 z m -258.817,33.058 0.067,-12.582 25.875,0.125 c -1.029,0.398 1.125,12.25 1.125,12.25 l -27.067,0.207 z"
        id="ak-47"
        stroke="#ffffff" />
</svg>
